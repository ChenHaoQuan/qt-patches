diff -Naur qt-everywhere-opensource-src-5.5.1/qtbase/configure qt-src-5.5.1/qtbase/configure
--- qt-everywhere-opensource-src-5.5.1/qtbase/configure	2015-10-13 15:35:07.000000000 +1100
+++ qt-src-5.5.1/qtbase/configure	2016-10-18 16:50:56.000000000 +1100
@@ -527,7 +527,7 @@
         exit 2
     fi
 
-    if ! /usr/bin/xcrun -find xcrun >/dev/null 2>&1; then
+    if ! /usr/bin/xcrun -find xcodebuild >/dev/null 2>&1; then
         echo >&2
         echo "   Xcode not set up properly. You may need to confirm the license" >&2
         echo "   agreement by running /usr/bin/xcodebuild without arguments." >&2
diff -Naur qt-everywhere-opensource-src-5.5.1/qtbase/mkspecs/features/mac/default_pre.prf qt-src-5.5.1/qtbase/mkspecs/features/mac/default_pre.prf
--- qt-everywhere-opensource-src-5.5.1/qtbase/mkspecs/features/mac/default_pre.prf	2015-10-13 15:35:32.000000000 +1100
+++ qt-src-5.5.1/qtbase/mkspecs/features/mac/default_pre.prf	2016-10-18 16:47:38.000000000 +1100
@@ -12,7 +12,7 @@
         error("Xcode is not installed in $${QMAKE_XCODE_DEVELOPER_PATH}. Please use xcode-select to choose Xcode installation path.")
 
     # Make sure Xcode is set up properly
-    isEmpty($$list($$system("/usr/bin/xcrun -find xcrun 2>/dev/null"))): \
+    isEmpty($$list($$system("/usr/bin/xcrun -find xcodebuild 2>/dev/null"))): \
         error("Xcode not set up properly. You may need to confirm the license agreement by running /usr/bin/xcodebuild.")
 }
 
diff -Naur qt-everywhere-opensource-src-5.5.1/qtbase/mkspecs/features/mac/objective_c.prf qt-src-5.5.1/qtbase/mkspecs/features/mac/objective_c.prf
--- qt-everywhere-opensource-src-5.5.1/qtbase/mkspecs/features/mac/objective_c.prf	2015-10-13 15:35:32.000000000 +1100
+++ qt-src-5.5.1/qtbase/mkspecs/features/mac/objective_c.prf	2016-10-18 16:45:21.000000000 +1100
@@ -19,5 +19,6 @@
 objective_c.output = $$OBJECTIVE_C_OBJECTS_DIR/${QMAKE_FILE_BASE}$${first(QMAKE_EXT_OBJ)}
 objective_c.input = OBJECTIVE_SOURCES
 objective_c.name = Compile ${QMAKE_FILE_IN}
+objective_c.skip_preprocess = 1
 silent:objective_c.commands = @echo objective-c ${QMAKE_FILE_IN} && $$objective_c.commands
 QMAKE_EXTRA_COMPILERS += objective_c
diff -Naur qt-everywhere-opensource-src-5.5.1/qtbase/qmake/generators/mac/pbuilder_pbx.cpp qt-src-5.5.1/qtbase/qmake/generators/mac/pbuilder_pbx.cpp
--- qt-everywhere-opensource-src-5.5.1/qtbase/qmake/generators/mac/pbuilder_pbx.cpp	2015-10-13 15:35:09.000000000 +1100
+++ qt-src-5.5.1/qtbase/qmake/generators/mac/pbuilder_pbx.cpp	2016-10-18 16:45:21.000000000 +1100
@@ -749,6 +749,8 @@
                 mkt << "compilers:";
                 const ProStringList &compilers = project->values("QMAKE_EXTRA_COMPILERS");
                 for(int compiler = 0; compiler < compilers.size(); ++compiler) {
+							if(!project->isEmpty(ProKey(compilers.at(compiler).toQString() + ".skip_preprocess")))
+								continue;
                     const ProStringList &tmp_out = project->values(ProKey(compilers.at(compiler) + ".output"));
                     if (tmp_out.isEmpty())
                         continue;
diff -Naur qt-everywhere-opensource-src-5.5.1/qtconnectivity/src/bluetooth/osx/osxbtcentralmanager_p.h qt-src-5.5.1/qtconnectivity/src/bluetooth/osx/osxbtcentralmanager_p.h
--- qt-everywhere-opensource-src-5.5.1/qtconnectivity/src/bluetooth/osx/osxbtcentralmanager_p.h	2015-10-13 15:35:37.000000000 +1100
+++ qt-src-5.5.1/qtconnectivity/src/bluetooth/osx/osxbtcentralmanager_p.h	2016-10-19 09:38:07.000000000 +1100
@@ -38,6 +38,7 @@
 #include "qlowenergyservice.h"
 #include "qbluetoothuuid.h"
 #include "osxbtutility_p.h"
+#include <CoreBluetooth/CoreBluetooth.h>
 
 #include <QtCore/qbytearray.h>
 #include <QtCore/qglobal.h>
diff -Naur qt-everywhere-opensource-src-5.5.1/qtconnectivity/src/bluetooth/osx/osxbtledeviceinquiry.mm qt-src-5.5.1/qtconnectivity/src/bluetooth/osx/osxbtledeviceinquiry.mm
--- qt-everywhere-opensource-src-5.5.1/qtconnectivity/src/bluetooth/osx/osxbtledeviceinquiry.mm	2015-10-13 15:35:37.000000000 +1100
+++ qt-src-5.5.1/qtconnectivity/src/bluetooth/osx/osxbtledeviceinquiry.mm	2016-10-19 09:37:42.000000000 +1100
@@ -35,6 +35,7 @@
 #include "qbluetoothdeviceinfo.h"
 #include "qbluetoothuuid.h"
 #include "osxbtutility_p.h"
+#include <CoreBluetooth/CoreBluetooth.h>
 
 #include <QtCore/qloggingcategory.h>
 #include <QtCore/qsysinfo.h>
diff -Naur qt-everywhere-opensource-src-5.5.1/qtconnectivity/src/bluetooth/osx/osxbtutility.mm qt-src-5.5.1/qtconnectivity/src/bluetooth/osx/osxbtutility.mm
--- qt-everywhere-opensource-src-5.5.1/qtconnectivity/src/bluetooth/osx/osxbtutility.mm	2015-10-13 15:35:37.000000000 +1100
+++ qt-src-5.5.1/qtconnectivity/src/bluetooth/osx/osxbtutility.mm	2016-10-19 09:36:46.000000000 +1100
@@ -43,6 +43,7 @@
 #import <IOBluetooth/objc/IOBluetoothSDPUUID.h>
 
 #endif
+#include <CoreBluetooth/CoreBluetooth.h>
 
 #include <algorithm>
 #include <limits>
diff -Naur qt-everywhere-opensource-src-5.5.1/qtconnectivity/src/bluetooth/qbluetoothdevicediscoveryagent_osx.mm qt-src-5.5.1/qtconnectivity/src/bluetooth/qbluetoothdevicediscoveryagent_osx.mm
--- qt-everywhere-opensource-src-5.5.1/qtconnectivity/src/bluetooth/qbluetoothdevicediscoveryagent_osx.mm	2015-10-13 15:35:37.000000000 +1100
+++ qt-src-5.5.1/qtconnectivity/src/bluetooth/qbluetoothdevicediscoveryagent_osx.mm	2016-10-19 09:38:31.000000000 +1100
@@ -42,6 +42,7 @@
 #include "osx/uistrings_p.h"
 #include "qbluetoothhostinfo.h"
 #include "qbluetoothuuid.h"
+#include <CoreBluetooth/CoreBluetooth.h>
 
 #include <QtCore/qloggingcategory.h>
 #include <QtCore/qdatetime.h>
